<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>è‹±æ‰“å°è‹±é›„ - æ˜Ÿåº§æŒ‘æˆ°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- å¼•å…¥ Google å­—å‹ -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* === èƒŒæ™¯ï¼šæ˜Ÿç©ºèˆ‡æ¼¸å±¤ === */
    body {
      margin: 0;
      padding: 0;
      overflow: auto;
      font-family: 'Orbitron', sans-serif;
      color: #fff;
      background: radial-gradient(circle at center, #001022 0%, #000010 100%);
    }
    /* æ˜Ÿæ˜Ÿç²’å­ */
    #starfield {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }
    /* ä¸»è¦å®¹å™¨ï¼šæ·»åŠ åŠé€æ˜èƒŒæ™¯å’Œæ¨¡ç³Šæ•ˆæœ */
    #container {
      position: relative;
      z-index: 1;
      max-width: 500px;
      margin: 40px auto;
      padding: 20px;
      background: rgba(0, 0, 30, 0.6);
      border-radius: 16px;
      box-shadow: 0 0 20px rgba(0, 204, 255, 0.4);
      backdrop-filter: blur(8px);
    }
    /* è¿”å›é¦–é æŒ‰éˆ• */
    .home-btn {
      position: absolute;
      top: 20px;
      left: 20px;
      background: #0ff;
      color: #000;
      font-weight: bold;
      padding: 8px 16px;
      border-radius: 8px;
      box-shadow: 0 0 8px #0ff;
      text-decoration: none;
      z-index: 2;
      transition: transform 0.2s, box-shadow 0.2s;
      font-family: 'Orbitron', sans-serif;
    }
    .home-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 12px #0ff;
    }
    /* ç¸½æ˜Ÿæ˜Ÿé¡¯ç¤º */
    #totalStars {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(0, 51, 102, 0.7);
      padding: 6px 12px;
      border-radius: 12px;
      box-shadow: 0 0 8px #0ff;
      font-size: 1rem;
      z-index: 2;
      font-family: 'Orbitron', sans-serif;
    }
    /* æ¨™é¡Œ */
    h1 {
      margin-top: 60px;
      font-size: 2rem;
      letter-spacing: 1px;
      text-shadow: 0 0 8px #0ff, 0 0 16px #00ffff;
      z-index: 2;
      font-family: 'Orbitron', sans-serif;
    }
    /* é¡Œæ•¸é¡¯ç¤º */
    #questionCount {
      margin: 10px auto;
      font-size: 1.2rem;
      color: #00ffff;
      text-align: center;
      z-index: 2;
      font-family: 'Orbitron', sans-serif;
    }
    /* å–®å­—é¡¯ç¤º */
    #wordDisplay {
      margin: 20px auto;
      font-size: 2.8rem;
      font-weight: bold;
      color: #ffcc00;
      text-shadow: 0 0 8px #ffaa00;
      animation: glow 2s ease-in-out infinite alternate;
      z-index: 2;
      font-family: 'Orbitron', sans-serif;
    }
    @keyframes glow {
      from { text-shadow: 0 0 8px #ffaa00; }
      to { text-shadow: 0 0 16px #ffd700; }
    }
    /* è¨ˆæ™‚å™¨ */
    #timerDisplay {
      font-size: 1.1rem;
      color: #00ffff;
      margin-bottom: 15px;
      z-index: 2;
      font-family: 'Orbitron', sans-serif;
    }
    #timerDisplay.danger { animation: flash 1s infinite; }
    @keyframes flash { 0%,100% { color: #00ffff; } 50% { color: #ff0000; } }
    /* è¼¸å…¥æ¡† */
    #answerInput {
      font-family: 'Roboto Mono', monospace;
      font-size: 1.1rem;
      padding: 12px 16px;
      border-radius: 12px;
      border: 2px solid rgba(0, 204, 255, 0.6);
      width: 80%;
      max-width: 400px;
      background: rgba(0,0,0,0.5);
      color: #fff;
      box-shadow: 0 0 6px #00ffff80;
      text-align: center;
      outline: none;
      margin-bottom: 15px;
    }
    #answerInput:focus {
      border-color: #00ffff;
      box-shadow: 0 0 12px #00ffff;
    }
    /* æ˜Ÿæ˜Ÿé¡¯ç¤º (éš±è—ä¸­) */
    #stars {
      display: none; /* éŠæˆ²éç¨‹ä¸­ä¸é¡¯ç¤ºæ˜Ÿæ˜Ÿåœ–ç¤º */
    }
    .star-icon, .lost-star {
      display: none; /* éš±è—æ‰€æœ‰å–®é¡†æ˜Ÿæ˜Ÿçš„åœ–ç¤º */
    }
    /* å›é¥‹è¨Šæ¯ */
    #feedback {
      height: 30px;
      font-size: 1.1rem;
      font-weight: bold;
      margin: 12px 0;
      color: #ff6666;
      z-index: 2;
      font-family: 'Orbitron', sans-serif;
    }
    /* æŒ‰éˆ•åˆ— */
    .btn-row {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 20px;
      z-index: 2;
    }
    button {
      font-family: 'Orbitron', sans-serif;
      font-size: 0.95rem;
      padding: 10px 18px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      background: linear-gradient(135deg, #0099cc, #003366);
      color: #fff;
      font-weight: bold;
      box-shadow: 0 0 8px #00ffff50;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 12px #00ffff;
    }
    #speakBtn { background: #ffcc00; color: #000; }
    /* æ¨¡æ…‹è¦–çª— */
    .modal {
      display: none;
      position: fixed;
      z-index: 10;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      align-items: center;
      justify-content: center;
      overflow-y: auto;
    }
    .modal-content {
      background: rgba(0, 0, 50, 0.9);
      padding: 30px;
      border-radius: 16px;
      color: #ffdd55;
      max-width: 500px;
      width: 85%;
      text-align: center;
      box-shadow: 0 0 20px #00ffff;
      font-family: 'Orbitron', sans-serif;
      margin: 20px;
    }
    .modal-content h2 {
      margin-bottom: 15px;
      color: #00ffff;
      text-shadow: 0 0 8px #0ff;
      font-size: 1.5rem;
      font-family: 'Orbitron', sans-serif;
    }
    .modal-content p {
      margin: 8px 0;
      font-size: 0.95rem;
      font-family: 'Orbitron', sans-serif;
    }
    .modal-content button {
      margin-top: 12px;
      background: #0099cc;
      color: #001122;
      box-shadow: 0 0 8px #00ffff50;
      padding: 8px 16px;
      border-radius: 10px;
      transition: transform 0.2s;
      font-family: 'Orbitron', sans-serif;
    }
    .modal-content button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 12px #00ffff;
    }
    .modal-content ul {
      list-style: none;
      padding: 0;
      max-height: 140px;
      overflow-y: auto;
      margin: 15px 0;
      text-align: left;
      font-size: 0.9rem;
      font-family: 'Roboto Mono', monospace;
    }
    .modal-content ul li { margin: 6px 0; }
  </style>
</head>
<body>
  <canvas id="starfield"></canvas>
  <div id="container">
    <a href="index.html" class="home-btn">â† è¿”å›é¦–é </a>
    <div id="totalStars">ç¸½æ˜Ÿæ˜Ÿï¼š<span id="totalStarCount">0</span> â­</div>
    <h1>ğŸ§  æ˜Ÿåº§æŒ‘æˆ°ï¼š<span id="categoryName"></span></h1>
    <div id="questionCount">ç¬¬ <span id="currentQuestion">0</span> é¡Œ / 20 é¡Œ</div>
    <div id="wordDisplay">æº–å‚™ä¸­...</div>
    <div id="timerDisplay">â± æ™‚é–“ï¼š<span id="timeLeft">30</span> ç§’</div>
    <input type="text" id="answerInput" placeholder="è«‹è¼¸å…¥è‹±æ–‡..." autocomplete="off" />
    <div id="stars"></div>
    <div id="feedback"></div>
    <div class="btn-row">
      <button onclick="checkAnswer()">é€å‡º</button>
      <button onclick="nextWord()">è·³é</button>
      <button id="speakBtn" onclick="speakCurrentWord()">ğŸ”ˆ ç™¼éŸ³</button>
      <button onclick="restartGame()">ğŸ” é‡ç©</button>
    </div>

    <!-- çµç®—é¢æ¿ -->
    <div id="resultModal" class="modal">
      <div class="modal-content">
        <h2>é—œå¡çµç®—</h2>
        <p>â˜… æœ¬æ¬¡ç²å¾—æ˜Ÿæ˜Ÿï¼š<span id="sessionStars">0</span></p>
        <p>âœ… ç­”å°é¡Œæ•¸ï¼š<span id="sessionCorrect">0</span></p>
        <p>âŒ ç­”éŒ¯é¡Œæ•¸ï¼š<span id="sessionWrong">0</span></p>
        <p>â­ ç´¯ç©ç¸½æ˜Ÿæ˜Ÿï¼š<span id="sessionTotal">0</span></p>
        <button id="wrongBtn" onclick="showWrongModal()">éŒ¯é¡Œè¤‡ç¿’</button>
        <button onclick="restartGame()">é‡æ–°é–‹å§‹</button>
        <button onclick="goHome()">è¿”å›é¦–é </button>
      </div>
    </div>
    <!-- éŒ¯é¡Œè¤‡ç¿’é¢æ¿ -->
    <div id="wrongModal" class="modal">
      <div class="modal-content">
        <h2>éŒ¯é¡Œè¤‡ç¿’</h2>
        <ul id="wrongItems"></ul>
        <button onclick="closeWrongModal()">é—œé–‰</button>
      </div>
    </div>

    <audio id="alertSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_7813880e63.mp3"></audio>
  </div>

  <script>
    // === æ˜Ÿæ˜ŸèƒŒæ™¯ç”Ÿæˆ ===
    const starCanvas = document.getElementById('starfield');
    const ctx = starCanvas.getContext('2d');
    let width = window.innerWidth;
    let height = window.innerHeight;
    starCanvas.width = width;
    starCanvas.height = height;
    const starsBg = [];
    function initStars() {
      starsBg.length = 0;
      for (let i = 0; i < 200; i++) {
        starsBg.push({
          x: Math.random() * width,
          y: Math.random() * height,
          r: Math.random() * 1.2 + 0.3,
          alpha: Math.random(),
          twinkle: Math.random() * 5
        });
      }
    }
    function drawStars() {
      ctx.clearRect(0, 0, width, height);
      starsBg.forEach(s => {
        s.twinkle += 0.02;
        s.alpha = Math.abs(Math.sin(s.twinkle));
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 255, 255, ${s.alpha})`;
        ctx.fill();
      });
      requestAnimationFrame(drawStars);
    }
    window.addEventListener('resize', () => {
      width = window.innerWidth;
      height = window.innerHeight;
      starCanvas.width = width;
      starCanvas.height = height;
      initStars();
    });
    initStars();
    drawStars();

    // --- TTS voices è¼‰å…¥ ---
    let voices = [];
    function loadVoices() {
      voices = window.speechSynthesis.getVoices();
    }
    if (speechSynthesis.onvoiceschanged !== undefined) {
      speechSynthesis.onvoiceschanged = loadVoices;
    }
    loadVoices();

    // --- å­—åº«è³‡æ–™ ---
    const vocabData = {
      aries: [
    { zh: "æˆ‘", en: "I" }, { zh: "ä½ ï¼›ä½ å€‘", en: "you" }, { zh: "ä»–", en: "he" }, { zh: "å¥¹", en: "she" },
    { zh: "ç‰ ï¼›å®ƒ", en: "it" }, { zh: "æˆ‘å€‘", en: "we" }, { zh: "ä»–å€‘", en: "they" }, { zh: "ç”·å­©", en: "boy" },
    { zh: "å¥³å­©", en: "girl" }, { zh: "å¬°å…’", en: "baby" }, { zh: "ä¸€å€‹", en: "an" }, { zh: "é€™ é‚£", en: "the" },
    { zh: "é€™", en: "this" }, { zh: "é‚£", en: "that" }, { zh: "é€™äº›", en: "these" }, { zh: "é‚£äº›", en: "those" },
    { zh: "æ˜¯ï¼›æˆç‚º", en: "be" }, { zh: "åŠ©å‹•è©", en: "do" }, { zh: "çˆ¸çˆ¸", en: "father" }, { zh: "åª½åª½", en: "mother" }

    ],
     taurus: [
    { zh: "å…’å­", en: "son" }, { zh: "å¥³å…’", en: "daughter" }, { zh: "(å¤–)ç¥–æ¯", en: "grandmother" }, { zh: "(å¤–)ç¥–çˆ¶", en: "grandfather" },
    { zh: "å“¥å“¥ï¼›å¼Ÿå¼Ÿ", en: "brother" }, { zh: "å§Šå§Šï¼›å¦¹å¦¹", en: "sister" }, { zh: "é›¶", en: "zero" }, { zh: "ä¸€", en: "one" },
    { zh: "äºŒ", en: "two" }, { zh: "ä¸‰", en: "three" }, { zh: "å››", en: "four" }, { zh: "äº”", en: "five" },
    { zh: "å…­", en: "six" }, { zh: "ä¸ƒ", en: "seven" }, { zh: "å…«", en: "eight" }, { zh: "ä¹", en: "nine" },
    { zh: "å", en: "ten" }, { zh: "åä¸€", en: "eleven" }, { zh: "åäºŒ", en: "twelve" }, { zh: "å­¸æ ¡", en: "school" }
  ],
gemini: [
    { zh: "ç­ç´šï¼›èª²ç¨‹", en: "class" }, { zh: "å­¸ç”Ÿ", en: "student" }, { zh: "è€å¸«", en: "teacher" }, { zh: "æœ‹å‹", en: "friend" },
    { zh: "æ›¸", en: "book" }, { zh: "æ¤…å­", en: "chair" }, { zh: "æ›¸æ¡Œ", en: "desk" }, { zh: "æ¡Œå­", en: "table" },
    { zh: "ç­†", en: "pen" }, { zh: "é‰›ç­†", en: "pencil" }, { zh: "å°º", en: "ruler" }, { zh: "æ©¡çš®æ“¦", en: "eraser" },
    { zh: "éº¥å¯ç­†", en: "marker" }, { zh: "ç›’å­ï¼›ç®±å­", en: "box" }, { zh: "é‰›ç­†ç›’", en: "pencil box" }, { zh: "åœ°åœ–", en: "map" },
    { zh: "é¡è‰²", en: "color" }, { zh: "ç´…è‰²", en: "red" }, { zh: "ç¶ è‰²", en: "green" }, { zh: "è—è‰²", en: "blue" }
  ],
 cancer: [
    { zh: "é»ƒè‰²", en: "yellow" }, { zh: "ç²‰ç´…è‰²", en: "pink" }, { zh: "é»‘è‰²", en: "black" }, { zh: "ç™½è‰²", en: "white" },
    { zh: "è‡‰", en: "face" }, { zh: "çœ¼ç›", en: "eye" }, { zh: "é¼»å­", en: "nose" }, { zh: "è€³æœµ", en: "ear" },
    { zh: "å˜´å·´", en: "mouth" }, { zh: "é ­", en: "head" }, { zh: "é ­é«®", en: "hair" }, { zh: "æ‰‹", en: "hand" },
    { zh: "è…¿", en: "leg" }, { zh: "è²“", en: "cat" }, { zh: "ç‹—", en: "dog" }, { zh: "é³¥", en: "bird" },
    { zh: "ç†Š", en: "bear" }, { zh: "é´¨", en: "duck" }, { zh: "é›", en: "chicken" }, { zh: "è€é¼ ", en: "mouse" }
  ],
  leo: [
    { zh: "è±¬", en: "pig" }, { zh: "å…”å­", en: "rabbit" }, { zh: "ç‹ç‹¸", en: "fox" }, { zh: "ç…å­", en: "lion" },
    { zh: "è€è™", en: "tiger" }, { zh: "ç¾Š", en: "sheep" }, { zh: "çŒ´å­", en: "monkey" }, { zh: "å¤§è±¡", en: "elephant" },
    { zh: "é¦¬", en: "horse" }, { zh: "é’è›™", en: "frog" }, { zh: "èèŸ»", en: "ant" }, { zh: "èœœèœ‚", en: "bee" },
    { zh: "è›‡", en: "snake" }, { zh: "å¯µç‰©", en: "pet" }, { zh: "å‹•ç‰©", en: "animal" }, { zh: "æˆ‘çš„", en: "my" },
    { zh: "ä½ çš„", en: "your" }, { zh: "ä»–çš„", en: "his" }, { zh: "å¥¹çš„", en: "her" }, { zh: "ç‰ çš„", en: "its" }
  ],
  virgo: [
    { zh: "æˆ‘å€‘çš„", en: "our" }, { zh: "ä»–å€‘çš„", en: "their" }, { zh: "æ˜¯", en: "is" }, { zh: "ä¸", en: "no" },
    { zh: "ä¸", en: "not" }, { zh: "å¥½", en: "good" }, { zh: "é†«ç”Ÿ", en: "doctor" }, { zh: "è­·å£«", en: "nurse" },
    { zh: "æ­Œæ‰‹", en: "singer" }, { zh: "æ¼”å“¡", en: "actor" }, { zh: "å»šå¸«", en: "chef" }, { zh: "é§•é§›å“¡", en: "driver" },
    { zh: "å·¥ç¨‹å¸«", en: "engineer" }, { zh: "è¾²å¤«", en: "farmer" }, { zh: "å·¥äºº", en: "worker" }, { zh: "åå­—", en: "name" },
    { zh: "å…ˆç”Ÿ", en: "mr." }, { zh: "å¤ªå¤ª", en: "mrs." }, { zh: "æ°´æœ", en: "fruit" }, { zh: "è˜‹æœ", en: "apple" }
  ],
  libra: [
    { zh: "æ¢¨å­", en: "pear" }, { zh: "æ¡ƒå­", en: "peach" }, { zh: "è‘¡è„", en: "grape" }, { zh: "é¦™è•‰", en: "banana" },
    { zh: "æ°´", en: "water" }, { zh: "ç‰›å¥¶", en: "milk" }, { zh: "å¯å£å¯æ¨‚", en: "cola" }, { zh: "æœæ±", en: "juice" },
    { zh: "å’–å•¡", en: "coffee" }, { zh: "èŒ¶", en: "tea" }, { zh: "è›‹", en: "egg" }, { zh: "è›‹ç³•", en: "cake" },
    { zh: "é­šï¼›é­šè‚‰", en: "fish" }, { zh: "ç±³ï¼›ç±³é£¯", en: "rice" }, { zh: "æ—©é¤", en: "breakfast" }, { zh: "åˆé¤", en: "lunch" },
    { zh: "æ™šé¤", en: "dinner" }, { zh: "åƒ", en: "eat" }, { zh: "å–ï¼›é£²æ–™", en: "drink" }, { zh: "ç¡", en: "sleep" }
  ],
  scorpio: [
    { zh: "è®€ï¼›é–±è®€", en: "read" }, { zh: "ç©", en: "play" }, { zh: "å»", en: "go" }, { zh: "å–œæ­¡", en: "like" },
    { zh: "è½", en: "listen" }, { zh: "éŸ³æ¨‚", en: "music" }, { zh: "é›»å½±", en: "movie" }, { zh: "æ¼«ç•«æ›¸", en: "comic book" },
    { zh: "é›»è…¦", en: "computer" }, { zh: "å…¬è»Š", en: "bus" }, { zh: "æ±½è»Š", en: "car" }, { zh: "è…³è¸è»Š", en: "bicycle" },
    { zh: "è¨ˆç¨‹è»Š", en: "taxi" }, { zh: "ç«è»Š", en: "train" }, { zh: "èˆ¹ï¼›è‰¦", en: "ship" }, { zh: "æ‰“é›»è©±ï¼›å«", en: "call" },
    { zh: "æ‰“é–‹", en: "open" }, { zh: "é—œä¸Š", en: "close" }, { zh: "çœ‹", en: "watch" }, { zh: "çœ‹", en: "look" }
  ],
  sagittarius: [
    { zh: "çœ‹", en: "see" }, { zh: "é«˜çš„", en: "tall" }, { zh: "é•·çš„", en: "long" }, { zh: "çŸ­çš„ï¼›çŸ®çš„", en: "short" },
    { zh: "å¤§çš„", en: "big" }, { zh: "å°çš„", en: "small" }, { zh: "å¥½çš„", en: "good" }, { zh: "å£çš„", en: "bad" },
    { zh: "ç¾å¥½çš„", en: "nice" }, { zh: "å¿«æ¨‚çš„", en: "happy" }, { zh: "å‚·å¿ƒçš„", en: "sad" }, { zh: "è‚¥èƒ–çš„", en: "fat" },
    { zh: "ç˜¦çš„ï¼›è–„çš„", en: "thin" }, { zh: "å¼·å£¯çš„", en: "strong" }, { zh: "å¯æ„›çš„", en: "cute" }, { zh: "ç”Ÿç—…çš„", en: "sick" },
    { zh: "ç–²å€¦çš„", en: "tired" }, { zh: "æ†¤æ€’çš„", en: "angry" }, { zh: "é¤“çš„", en: "hungry" }, { zh: "æ¸´çš„", en: "thirsty" }
  ],
  capricorn: [
    { zh: "é˜¿å§¨", en: "aunt" }, { zh: "å”å”", en: "uncle" }, { zh: "å ‚/è¡¨å…„å¼Ÿå§Šå¦¹", en: "cousin" }, { zh: "çˆ¶(æ¯)è¦ª", en: "parent" },
    { zh: "å®¶åº­ï¼›å®¶äºº", en: "family" }, { zh: "ä½", en: "live" }, { zh: "é£Ÿç‰©", en: "food" }, { zh: "ç‰›è‚‰", en: "beef" },
    { zh: "è±¬è‚‰", en: "pork" }, { zh: "æ¹¯", en: "soup" }, { zh: "ç†±ç‹—", en: "hot dog" }, { zh: "ä¸‰æ˜æ²»", en: "sandwich" },
    { zh: "ç•ªèŒ„", en: "tomato" }, { zh: "æŸ³æ©™", en: "orange" }, { zh: "è”¬èœ", en: "vegetable" }, { zh: "éºµåŒ…", en: "bread" },
    { zh: "æ´¾", en: "pie" }, { zh: "æŠ«è–©", en: "pizza" }, { zh: "å†°æ·‡æ·‹", en: "ice cream" }, { zh: "ç³–æœ", en: "candy" }
  ],
  aquarius: [
    { zh: "é¤…ä¹¾", en: "cookie" }, { zh: "æ¼¢å ¡", en: "hamburger" }, { zh: "æ¸¸æ³³", en: "swim" }, { zh: "è·³èˆ", en: "dance" },
    { zh: "è·‘", en: "run" }, { zh: "è·³", en: "jump" }, { zh: "å”±", en: "sing" }, { zh: "é£›ï¼›é£›è¡Œ", en: "fly" },
    { zh: "å¯ä»¥", en: "can" }, { zh: "æœ‰ï¼›åƒ", en: "have" }, { zh: "é¨", en: "ride" }, { zh: "é§•é§›ï¼›é–‹è»Š", en: "drive" },
    { zh: "èµ°", en: "walk" }, { zh: "æ‹¿ï¼›æ­ä¹˜", en: "take" }, { zh: "å¯«", en: "write" }, { zh: "å­¸ç¿’ï¼›è®€æ›¸", en: "study" },
    { zh: "åš", en: "do" }, { zh: "åšï¼›è£½ä½œ", en: "make" }, { zh: "éŠæˆ²ï¼›æ¯”è³½", en: "game" }, { zh: "é›»è…¦éŠæˆ²", en: "computer game" }
  ],
  pisces: [
    { zh: "å¡ç‰‡", en: "card" }, { zh: "é‹¼ç´", en: "piano" }, { zh: "å‰ä»–", en: "guitar" }, { zh: "æ­Œæ›²", en: "song" },
    { zh: "çƒ", en: "ball" }, { zh: "æ£’çƒ", en: "baseball" }, { zh: "ç±ƒçƒ", en: "basketball" }, { zh: "è¶³çƒ", en: "soccer" },
    { zh: "é¢¨ç®", en: "kite" }, { zh: "å¨ƒå¨ƒ", en: "doll" }, { zh: "æ˜¥å¤©", en: "spring" }, { zh: "å¤å¤©", en: "summer" },
    { zh: "ç§‹å¤©", en: "autumn" }, { zh: "å†¬å¤©", en: "winter" }, { zh: "å¤ªé™½", en: "sun" }, { zh: "æœˆäº®", en: "moon" },
    { zh: "æ˜Ÿæ˜Ÿ", en: "star" }, { zh: "é›¨", en: "rain" }, { zh: "ç†±çš„", en: "hot" }, { zh: "å†·çš„", en: "cold" }
  ],
  phoenix: [
    { zh: "æ™´æœ—çš„", en: "clear" }, { zh: "ä¸‹é›¨çš„", en: "rainy" }, { zh: "å¤šé›²çš„", en: "cloudy" }, { zh: "æœ‰é¢¨çš„", en: "windy" },
    { zh: "æš–å’Œçš„", en: "warm" }, { zh: "æ¶¼çˆ½çš„ï¼›å¾ˆé…·çš„", en: "cool" }, { zh: "å¤©æ°£", en: "weather" }, { zh: "èª°", en: "who" },
    { zh: "ä»€éº¼", en: "what" }, { zh: "ç•¶â€¦çš„æ™‚å€™", en: "when" }, { zh: "å¦‚ä½•", en: "how" }, { zh: "å“ªè£¡", en: "where" },
    { zh: "å“ªä¸€å€‹", en: "which" }, { zh: "é€™è£¡", en: "here" }, { zh: "é‚£è£¡", en: "there" }, { zh: "åœ¨â€¦ä¹‹å…§", en: "inside" },
    { zh: "åœ¨â€¦ä¹‹ä¸Š", en: "on" }, { zh: "åœ¨â€¦åœ°é»", en: "at" }, { zh: "åœ¨â€¦ä¹‹ä¸‹", en: "under" }, { zh: "å¾ï¼›ç”±", en: "from" }
  ],
  draco: [
    { zh: "å¤–çš„", en: "outside" }, { zh: "åœ¨â€¦å¤–å´", en: "outside of" }, { zh: "æ ¹æ“š", en: "according to" }, { zh: "ç‚ºäº†", en: "for" },
    { zh: "å‘ï¼›å¾€", en: "toward" }, { zh: "èˆ‡ï¼›ç”¨â€¦", en: "with" }, { zh: "å’Œï¼›è€Œä¸”", en: "and" }, { zh: "ä½†æ˜¯", en: "but" },
    { zh: "è¡£æœ", en: "clothes" }, { zh: "å¤§è¡£", en: "coat" }, { zh: "å¤¾å…‹", en: "jacket" }, { zh: "è¤²å­", en: "pants" },
    { zh: "Tæ¤", en: "t-shirt" }, { zh: "çŸ­è¤²", en: "shorts" }, { zh: "è£™å­", en: "skirt" }, { zh: "è¥¯è¡«", en: "shirt" },
    { zh: "æ´‹è£", en: "dress" }, { zh: "(çŸ­)è¥ªå­", en: "socks" }, { zh: "é‹å­", en: "shoes" }, { zh: "æ¢³å­ å‹•æ¢³", en: "comb" }
  ],  orion: [
    { zh: "è¢‹å­ï¼›æè¢‹", en: "bag" }, { zh: "å¸½å­(æœ‰é‚Šçš„)", en: "hat" }, { zh: "é›¨å‚˜", en: "umbrella" }, { zh: "èº«é«”", en: "body" },
    { zh: "ç‰™é½’", en: "tooth" }, { zh: "èƒŒéƒ¨", en: "back" }, { zh: "è„–å­", en: "neck" }, { zh: "å”‡", en: "lip" },
    { zh: "æ‰‹æŒ‡é ­", en: "finger" }, { zh: "è…³ï¼›è¶³", en: "foot" }, { zh: "å¤©ï¼›æ—¥å­", en: "day" }, { zh: "æ˜ŸæœŸä¸€", en: "Monday" },
    { zh: "æ˜ŸæœŸäºŒ", en: "Tuesday" }, { zh: "æ˜ŸæœŸä¸‰", en: "Wednesday" }, { zh: "æ˜ŸæœŸå››", en: "Thursday" }, { zh: "æ˜ŸæœŸäº”", en: "Friday" },
    { zh: "æ˜ŸæœŸå…­", en: "Saturday" }, { zh: "æ˜ŸæœŸæ—¥", en: "Sunday" }, { zh: "é€±ï¼›ä¸€æ˜ŸæœŸ", en: "week" }, { zh: "é€±æœ«", en: "weekend" }
  ],

  cygnus: [
    { zh: "æœˆ", en: "month" }, { zh: "å¹´", en: "year" }, { zh: "æ—©æ™¨ï¼›ä¸Šåˆ", en: "morning" }, { zh: "åˆå¾Œ", en: "afternoon" },
    { zh: "å‚æ™šï¼›æ™šä¸Š", en: "evening" }, { zh: "å¤œï¼›æ™šä¸Š", en: "night" }, { zh: "ä»Šå¤©", en: "today" }, { zh: "ä»Šå¤©æ™šä¸Š", en: "tonight" },
    { zh: "æ˜å¤©", en: "tomorrow" }, { zh: "æ˜¨å¤©", en: "yesterday" }, { zh: "æ™‚é–“ï¼›æœŸé–“", en: "time" }, { zh: "â€¦é»é˜", en: "oâ€™clock" },
    { zh: "ä¸Šåˆ", en: "a.m." }, { zh: "ä¸‹åˆ", en: "p.m." }, { zh: "ç¾åœ¨", en: "now" }, { zh: "æœ€å¾Œçš„ æœ€å¾Œåœ°", en: "last" },
    { zh: "æ™šçš„ æ™šåœ°", en: "late" }, { zh: "ä¸‹å€‹ ä¸‹æ¬¡çš„", en: "next" }, { zh: "æ•™å®¤", en: "classroom" }, { zh: "åŒå­¸", en: "classmate" }
  ],
  pegasus: [
    { zh: "é»‘æ¿", en: "blackboard" }, { zh: "ç­†è¨˜æœ¬", en: "notebook" }, { zh: "ç´™", en: "paper" }, { zh: "åœ–ç•«", en: "picture" },
    { zh: "è‹±æ–‡", en: "English" }, { zh: "ä¸­æ–‡ï¼›ä¸­åœ‹äºº", en: "Chinese" }, { zh: "æ•¸å­¸", en: "math" }, { zh: "é«”è‚²", en: "PE" },
    { zh: "å—¨", en: "hi" }, { zh: "å“ˆå›‰", en: "hello" }, { zh: "å†è¦‹", en: "goodbye" }, { zh: "èªªï¼›æ¼”èªª", en: "speak" },
    { zh: "èªª", en: "say" }, { zh: "å•", en: "ask" }, { zh: "å›ç­”ï¼›ç­”æ¡ˆ", en: "answer" }, { zh: "èªªè©±", en: "talk" },
    { zh: "å•é¡Œ", en: "question" }, { zh: "ç•«", en: "draw" }, { zh: "ç©¿", en: "wear" }, { zh: "æ‰“æƒ ä¹¾æ·¨çš„", en: "clean" }
  ],
  cassiopeia: [
    { zh: "æ´—", en: "wash" }, { zh: "é‡è¦‹", en: "meet" }, { zh: "éä¾†", en: "come" }, { zh: "æƒ³è¦", en: "want" },
    { zh: "å¹«åŠ©", en: "help" }, { zh: "ä½¿ç”¨", en: "use" }, { zh: "æ–°çš„", en: "new" }, { zh: "å¹´è€çš„", en: "old" },
    { zh: "å¿«é€Ÿçš„", en: "fast" }, { zh: "æ…¢çš„", en: "slow" }, { zh: "æ¼‚äº®çš„", en: "pretty" }, { zh: "è‹±ä¿Šçš„", en: "handsome" },
    { zh: "è°æ˜çš„", en: "smart" }, { zh: "ç¾å¥½çš„", en: "nice" }, { zh: "æ¨‚è¶£", en: "fun" }, { zh: "å¾ˆæ£’çš„", en: "great" },
    { zh: "ä¹å‘³çš„", en: "boring" }, { zh: "ä¸€äº›", en: "some" }, { zh: "éå¸¸ï¼›å¾ˆ", en: "very" }, { zh: "ä¹Ÿï¼›å¤ª", en: "too" }
  ],
  scorpius: [
    { zh: "æˆ¿å­ï¼›æˆ¿å±‹", en: "house" }, { zh: "å®¢å»³", en: "living room" }, { zh: "å»šæˆ¿", en: "kitchen" }, { zh: "å¯¢å®¤", en: "bedroom" },
    { zh: "æµ´å®¤", en: "bathroom" }, { zh: "é–€", en: "door" }, { zh: "å®¶", en: "home" }, { zh: "æˆ¿é–“", en: "room" },
    { zh: "ç‰†å£", en: "wall" }, { zh: "åºŠ", en: "bed" }, { zh: "ç©å…·", en: "toy" }, { zh: "çª—æˆ¶", en: "window" },
    { zh: "é›»è¦–", en: "TV" }, { zh: "é›»è©±", en: "telephone" }, { zh: "é¢¨æ‰‡", en: "fan" }, { zh: "æ²™ç™¼", en: "sofa" },
    { zh: "é–åŒ™", en: "key" }, { zh: "ç›¤å­ï¼›ç¢Ÿå­", en: "plate" }, { zh: "ç¢—", en: "bowl" }, { zh: "ç­·å­", en: "chopsticks" }
  ],
  vela: [
    { zh: "æ¯å­", en: "cup" }, { zh: "ç»ç’ƒæ¯", en: "glass" }, { zh: "å‹•ç‰©åœ’", en: "zoo" }, { zh: "å…¬åœ’", en: "park" },
    { zh: "è¾²å ´", en: "farm" }, { zh: "åº—èˆ–", en: "shop" }, { zh: "æ›¸åº—", en: "bookstore" }, { zh: "é†«é™¢", en: "hospital" },
    { zh: "éŠ€è¡Œ", en: "bank" }, { zh: "åœ–æ›¸é¤¨", en: "library" }, { zh: "è¶…ç´šå¸‚å ´", en: "supermarket" }, { zh: "å°ç£", en: "Taiwan" },
    { zh: "ç¾åœ‹", en: "USA" }, { zh: "èŠ±", en: "flower" }, { zh: "æ¨¹", en: "tree" }, { zh: "æ—…éŠ", en: "travel" },
    { zh: "å¤¢æƒ³", en: "dream" }, { zh: "æ·é‹", en: "MRT" }, { zh: "ä¸€ç™¾(çš„)", en: "hundred" }, { zh: "å…ƒ", en: "dollar" }
],
    // å…¶é¤˜è«‹ä¿ç•™ä½ åŸæœ¬å®Œæ•´çš„å­—åº«çµæ§‹
    };

    // éŠæˆ²é‚è¼¯è®Šæ•¸
    const params = new URLSearchParams(location.search);
    const categoryKey = params.get('category') || 'aries';
    document.getElementById('categoryName').textContent = categoryKey;
    let words = vocabData[categoryKey] || [];
    words = words.slice(0, 20);  // æ¯é—œæœ€å¤š 20 é¡Œ

    let current = null;
    let used = [];
    let wrongList = [];
    let correctCount = 0;
    let timer = null;
    let timeLeft = 30;
    let answerStartTime = 0;
    
    // è®€å–ä¸¦é¡¯ç¤ºç¸½æ˜Ÿæ˜Ÿï¼Œä¸æœƒé‡ç½®
    let totalStarCount = parseInt(localStorage.getItem('totalStars') || '0', 10);
    function updateTotal() {
      document.getElementById('totalStarCount').textContent = totalStarCount;
    }

    function speak(text) {
      if (!text) return;
      const msg = new SpeechSynthesisUtterance(text);
      msg.lang = 'en-US';
      msg.rate = 0.8;
      if (voices.length > 0) msg.voice = voices.find(v => v.lang === 'en-US') || voices[0];
      window.speechSynthesis.speak(msg);
    }
    function speakCurrentWord() {
      if (!current) return;
      speak(current.en);
    }

    function updateQuestionCount() {
      document.getElementById('currentQuestion').textContent = used.length;
    }

    function startTimer() {
      clearInterval(timer);
      timeLeft = 30;
      document.getElementById('timeLeft').textContent = timeLeft;
      const timerDiv = document.getElementById('timerDisplay');
      timer = setInterval(() => {
        timeLeft--;
        document.getElementById('timeLeft').textContent = timeLeft;
        timerDiv.classList.toggle('danger', timeLeft <= 5);
        if (timeLeft <= 0) {
          clearInterval(timer);
          wrongList.push(current);
          nextWord();
        }
      }, 1000);
      answerStartTime = Date.now();
    }

    function showResultPanel() {
      // è¨ˆç®—æœ¬æ¬¡ç²å¾—æ˜Ÿæ˜Ÿï¼šç­”å°é¡Œæ•¸ä¸Šé™ 10 é¡†ï¼Œä¹˜ä»¥ 2
      const earnedStars = Math.min(correctCount, 10);
      const sessionStars = earnedStars * 2;
      totalStarCount += sessionStars;
      localStorage.setItem('totalStars', totalStarCount);

      document.getElementById('sessionStars').textContent = sessionStars;
      document.getElementById('sessionCorrect').textContent = correctCount;
      document.getElementById('sessionWrong').textContent = wrongList.length;
      document.getElementById('sessionTotal').textContent = totalStarCount;
      document.getElementById('wrongBtn').style.display = wrongList.length ? 'inline-block' : 'none';
      document.getElementById('resultModal').style.display = 'flex';
      disablePlay();
      updateTotal();
    }
    function disablePlay() {
      document.getElementById('answerInput').disabled = true;
      document.querySelectorAll('.btn-row button').forEach(btn => btn.disabled = true);
    }
    function enablePlay() {
      document.getElementById('answerInput').disabled = false;
      document.querySelectorAll('.btn-row button').forEach(btn => btn.disabled = false);
    }

    function showWrongModal() {
      const list = document.getElementById('wrongItems');
      list.innerHTML = '';
      wrongList.forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.zh} â€” ${item.en}`;
        list.appendChild(li);
      });
      document.getElementById('wrongModal').style.display = 'flex';
    }
    function closeWrongModal() {
      document.getElementById('wrongModal').style.display = 'none';
    }
    function goHome() {
      location.href = 'index.html';
    }

    function nextWord() {
      if (used.length >= words.length) {
        document.getElementById('wordDisplay').textContent = 'âœ… æŒ‘æˆ°å®Œæˆ';
        clearInterval(timer);
        showResultPanel();
        return;
      }
      const available = words.filter(w => !used.includes(w.en));
      current = available[Math.floor(Math.random() * available.length)];
      used.push(current.en);
      updateQuestionCount();
      document.getElementById('wordDisplay').textContent = current.zh;
      document.getElementById('answerInput').value = '';
      document.getElementById('feedback').textContent = '';
      speak(current.en);
      startTimer();
      document.getElementById('resultModal').style.display = 'none';
      document.getElementById('wrongModal').style.display = 'none';
      enablePlay();
    }

    function checkAnswer() {
      if (!current) return;
      const ans = document.getElementById('answerInput').value.trim().toLowerCase();
      if (ans === current.en.toLowerCase()) {
        document.getElementById('feedback').textContent = 'âœ… æ­£ç¢º';
        document.getElementById('feedback').style.color = '#0f0';
        correctCount++;
      } else {
        document.getElementById('feedback').textContent = `âŒ æ­£è§£æ˜¯ï¼š${current.en}`;
        document.getElementById('feedback').style.color = '#f66';
        wrongList.push(current);
      }
      clearInterval(timer);
      setTimeout(() => nextWord(), 800);
    }

    function restartGame() {
      used = [];
      wrongList = [];
      correctCount = 0;
      document.getElementById('currentQuestion').textContent = '0';
      document.getElementById('resultModal').style.display = 'none';
      document.getElementById('wrongModal').style.display = 'none';
      nextWord();
    }

    document.getElementById('answerInput').addEventListener('keydown', e => {
      if (e.key === 'Enter') checkAnswer();
    });
// è¼‰å…¥ä¸¦é¡¯ç¤ºç©å®¶è³‡è¨Š
function loadPlayerInfo() {
  const name = localStorage.getItem('playerName') || 'æœªå‘½å';
  document.getElementById('playerName').textContent = `ç©å®¶ï¼š${name}`;
  const avatarSrc = localStorage.getItem('selectedAvatar');
  if (avatarSrc) {
    document.getElementById('playerAvatar').src = avatarSrc;
  }
}

// ç›£è½ localStorage è®Šå‹•ï¼Œæ›´æ–°ä»‹é¢
window.addEventListener('storage', function(e) {
  if (e.key === 'playerName' || e.key === 'selectedAvatar') {
    loadPlayerInfo();
  }
});

// è¼‰å…¥ç•«é¢æ™‚åŸ·è¡Œ
window.addEventListener('load', loadPlayerInfo);
    // åˆå§‹åŒ–
    updateTotal();
    updateQuestionCount();
    nextWord();
  </script>
</body>
</html>
