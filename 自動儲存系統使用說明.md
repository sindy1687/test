# 🔄 統一自動儲存系統使用說明

## 📋 功能概述

這個統一自動儲存系統可以自動儲存所有遊戲資料，包括：

### 🎮 核心遊戲資料
- ⭐ **星星數量** - 總星星數和獲得紀錄
- 🎴 **卡片收藏** - 已擁有的卡片和卡片碎片
- 👤 **玩家資料** - 玩家名稱和選擇的頭像

### 🏆 進度與成就
- 📈 **關卡進度** - 所有文法關卡的完成狀態
- 🏅 **成就資料** - 已解鎖的成就和獎勵
- 📊 **統計資料** - 各種遊戲統計數據

### 🎵 系統設定
- 🔊 **音效設定** - 背景音樂和音效狀態
- 🎛️ **遊戲設定** - 各種個人化設定

### 📚 學習資料
- 📖 **單字本** - 自訂單字本和學習進度
- 📝 **錯誤紀錄** - 答錯的題目記錄

---

## 🚀 快速開始

### 1. 啟用自動儲存
1. 前往首頁，點擊 **💾 自動儲存** 按鈕
2. 點擊 **🔄 啟用自動儲存** 按鈕
3. 系統會自動開始監控並儲存您的遊戲資料

### 2. 自動儲存特性
- **即時監控** - 資料一有變化就會觸發儲存檢查
- **智慧延遲** - 防止頻繁儲存，30秒後才執行
- **定期備份** - 每5分鐘自動檢查一次資料變化
- **間隔控制** - 備份間隔至少10分鐘，避免過於頻繁的備份
- **狀態顯示** - 在頁面右上角顯示儲存進度（不干擾遊戲）
- **固定數量** - 始終保持5個不同時間的備份版本

---

## 🎛️ 管理介面使用

### 📊 狀態面板
在自動儲存管理器中，您可以查看：
- **自動儲存狀態** - 目前是否已啟用
- **最後儲存時間** - 上次備份的時間
- **監控資料項目** - 正在監控的資料類型數量
- **備份數量** - 目前保存的備份數量

### 🎮 基本控制
- **切換自動儲存** - 啟用或停用自動儲存功能
- **💾 立即儲存** - 手動執行一次完整備份
- **🔄 重新整理狀態** - 更新管理介面的顯示

### ☁️ 雲端備份
- **📡 載入雲端備份** - 從最新的雲端備份恢復資料
- **📤 匯出備份檔案** - 將備份下載為 JSON 檔案
- **📥 匯入備份檔案** - 從 JSON 檔案恢復資料

### 📋 備份列表
- 查看所有可用的備份版本（固定顯示5個）
- 顯示備份時間、類型（自動/手動）和檔案大小
- 📊 **詳細資訊** - 顯示每個備份的星星數量和卡片數量
- ⏰ **時間顯示** - 顯示相對時間（如「10分鐘前」）
- 🏷️ **備份標記** - 歷史備份會顯示「(歷史)」標記
- 一鍵載入特定版本的備份

### 📝 備份管理功能
- **生成5個備份** - 手動創建5個間隔10分鐘的備份序列
- **智慧間隔** - 自動備份間隔至少10分鐘，避免過於頻繁
- **歷史填充** - 系統啟動時自動確保有5個備份可用

---

## ⚠️ 重要注意事項

### 🛡️ 資料安全
1. **備份確認** - 載入備份前會要求確認，避免誤操作
2. **多重保護** - 系統會在本地保留多個備份版本
3. **即時同步** - 跨分頁資料同步，確保一致性

### 💾 儲存機制
1. **本地儲存** - 使用瀏覽器的 localStorage 作為主要儲存
2. **雲端備份** - 實際上是增強版的本地備份系統
3. **自動清理** - 只保留最新的5個備份，自動清理舊備份

### 🔧 疑難排解
1. **系統未載入** - 重新整理頁面或清除瀏覽器快取
2. **備份失敗** - 檢查瀏覽器的 localStorage 空間
3. **載入失敗** - 確認備份檔案格式正確

---

## 🚨 危險操作

### ⚡ 重設自動儲存
- 清除所有自動儲存設定但保留遊戲資料
- 需要重新啟用自動儲存功能

### 🗑️ 清除所有備份
- **永久刪除** 所有備份檔案
- **無法復原** - 請謹慎使用
- 不會影響目前的遊戲資料

---

## 🔍 狀態顯示說明

### 📱 自動儲存狀態提示
當系統執行自動儲存時，會在頁面右上角顯示狀態提示：

#### 🔄 儲存中狀態
- **顯示** - 藍紫色漸層背景，旋轉圖示
- **訊息** - 「正在自動儲存...」
- **持續時間** - 直到儲存完成

#### ✅ 儲存成功狀態  
- **顯示** - 綠色漸層背景，勾選圖示
- **訊息** - 「自動儲存完成」
- **持續時間** - 2秒後自動消失

#### ❌ 儲存失敗狀態
- **顯示** - 紅色漸層背景，錯誤圖示
- **訊息** - 「自動儲存失敗」或具體錯誤
- **持續時間** - 3秒後自動消失

### 🎮 遊戲體驗優化
- **不干擾遊戲** - 狀態提示不會阻擋遊戲內容
- **簡潔明瞭** - 清楚顯示儲存狀態而不影響操作
- **自動消失** - 無需手動關閉，不會累積在畫面上

---

## 🔄 最佳實踐

### 📅 定期管理
1. **定期檢查** - 每週查看一次備份狀態
2. **手動備份** - 重要進展前手動執行備份
3. **匯出重要備份** - 下載重要的備份檔案保存

### 🎯 使用建議
1. **保持啟用** - 建議始終保持自動儲存開啟
2. **及時更新** - 發現問題時立即檢查管理介面
3. **備份驗證** - 偶爾測試備份載入功能

### 🛠️ 維護操作
1. **清理空間** - 定期清理不需要的舊備份
2. **匯出保存** - 重要節點時匯出備份檔案
3. **系統重設** - 遇到問題時可嘗試重設系統

---

## 📞 技術支援

如果您在使用過程中遇到問題：

1. **檢查狀態** - 先查看管理介面的狀態資訊
2. **查看日誌** - 管理介面下方有詳細的操作紀錄
3. **重新整理** - 嘗試重新整理頁面
4. **重設系統** - 最後手段：重設自動儲存系統

---

## 🎉 享受遊戲

有了自動儲存系統，您可以安心地：
- 🎮 專注於遊戲體驗
- 📈 不用擔心進度丟失
- 🔄 隨時恢復到之前的狀態
- 💯 享受無憂的學習過程

**祝您遊戲愉快！** 🌟

---

## 🧹 舊版系統清理

如果您之前使用過舊版的自動儲存功能，可以使用清理工具：

### 🔧 自動清理工具
1. 開啟 `cleanup_old_autosave.html` 清理頁面
2. 點擊「🧹 開始清理」按鈕
3. 系統會自動移除過時的設定項目

### 📝 清理項目
舊版設定項目包括：
- `autoSaveEnabled` - 舊版啟用設定
- `autoSaveInterval` - 舊版間隔設定  
- `lastAutoSaveHash` - 舊版雜湊快取
- 其他相關的過時設定

### ⚠️ 安全保證
- ✅ 清理過程不會影響您的遊戲資料
- ✅ 不會影響新版統一自動儲存系統
- ✅ 只移除不再使用的舊版設定項目 

新玩家：5分鐘後首次提醒
老玩家：10分鐘後檢查
定期檢查：每5分鐘
強制提醒：距上次儲存超過20分鐘 