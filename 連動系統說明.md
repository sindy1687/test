# é€£å‹•ç³»çµ±èªªæ˜

## æ¦‚è¿°

é€£å‹•ç³»çµ±æ˜¯ä¸€å€‹çµ±ä¸€çš„è³‡æ–™ç®¡ç†å¹³å°ï¼Œè² è²¬ç®¡ç†æ•´å€‹éŠæˆ²æ‡‰ç”¨ç¨‹å¼ä¸­çš„å„ç¨®è³‡æ–™ï¼ŒåŒ…æ‹¬æ˜Ÿæ˜Ÿç³»çµ±ã€ç©å®¶è³‡æ–™ã€å¡ç‰‡ç³»çµ±ã€éŸ³æ¨‚è¨­å®šç­‰ã€‚é€éé€™å€‹ç³»çµ±ï¼Œæ‰€æœ‰é é¢éƒ½èƒ½å³æ™‚åŒæ­¥è³‡æ–™ï¼Œæä¾›ä¸€è‡´çš„ç”¨æˆ¶é«”é©—ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### 1. æ˜Ÿæ˜Ÿç³»çµ± (LinkageSystem.stars)

**åŠŸèƒ½ï¼š** ç®¡ç†éŠæˆ²ä¸­çš„æ˜Ÿæ˜Ÿè²¨å¹£ç³»çµ±

**ä¸»è¦æ–¹æ³•ï¼š**
- `get()` - ç²å–ç•¶å‰æ˜Ÿæ˜Ÿæ•¸é‡
- `set(amount)` - è¨­å®šæ˜Ÿæ˜Ÿæ•¸é‡
- `add(amount)` - å¢åŠ æ˜Ÿæ˜Ÿ
- `subtract(amount)` - æ¸›å°‘æ˜Ÿæ˜Ÿï¼ˆæœƒæª¢æŸ¥é¤˜é¡ï¼‰
- `updateDisplay()` - æ›´æ–°æ‰€æœ‰é é¢çš„æ˜Ÿæ˜Ÿé¡¯ç¤º

**ä½¿ç”¨ç¯„ä¾‹ï¼š**
```javascript
// å¢åŠ  50 é¡†æ˜Ÿæ˜Ÿ
LinkageSystem.stars.add(50);

// æª¢æŸ¥æ˜¯å¦æœ‰è¶³å¤ æ˜Ÿæ˜Ÿè³¼è²·ç‰©å“
if (LinkageSystem.stars.subtract(100)) {
    console.log("è³¼è²·æˆåŠŸï¼");
} else {
    console.log("æ˜Ÿæ˜Ÿä¸è¶³ï¼");
}
```

### 2. ç©å®¶è³‡æ–™ç³»çµ± (LinkageSystem.player)

**åŠŸèƒ½ï¼š** ç®¡ç†ç©å®¶å€‹äººè³‡æ–™

**ä¸»è¦æ–¹æ³•ï¼š**
- `getName()` - ç²å–ç©å®¶åç¨±
- `setName(name)` - è¨­å®šç©å®¶åç¨±
- `getAvatar()` - ç²å–ç©å®¶é ­åƒè·¯å¾‘
- `setAvatar(avatarPath)` - è¨­å®šç©å®¶é ­åƒ
- `updateDisplay()` - æ›´æ–°æ‰€æœ‰é é¢çš„ç©å®¶è³‡æ–™é¡¯ç¤º

**ä½¿ç”¨ç¯„ä¾‹ï¼š**
```javascript
// è¨­å®šç©å®¶åç¨±
LinkageSystem.player.setName("æ˜Ÿéš›å†’éšªè€…");

// è¨­å®šé ­åƒ
LinkageSystem.player.setAvatar("img/avatars/avatar_astro1.png");
```

### 3. å¡ç‰‡ç³»çµ± (LinkageSystem.cards)

**åŠŸèƒ½ï¼š** ç®¡ç†å¡ç‰‡æ”¶é›†å’Œç¢ç‰‡ç³»çµ±

**ä¸»è¦æ–¹æ³•ï¼š**
- `getOwnedCards()` - ç²å–å·²æ“æœ‰çš„å¡ç‰‡
- `setOwnedCards(cards)` - è¨­å®šå·²æ“æœ‰çš„å¡ç‰‡
- `getShards()` - ç²å–ç¢ç‰‡è³‡æ–™
- `setShards(shards)` - è¨­å®šç¢ç‰‡è³‡æ–™
- `addCard(word)` - æ–°å¢ä¸€å¼µå¡ç‰‡
- `addShard(word, count)` - æ–°å¢ç¢ç‰‡
- `isCardOwned(word)` - æª¢æŸ¥æ˜¯å¦æ“æœ‰æŸå¼µå¡ç‰‡
- `getShardCount(word)` - ç²å–æŸå¼µå¡ç‰‡çš„ç¢ç‰‡æ•¸é‡

**ä½¿ç”¨ç¯„ä¾‹ï¼š**
```javascript
// æª¢æŸ¥æ˜¯å¦æ“æœ‰æŸå¼µå¡ç‰‡
if (LinkageSystem.cards.isCardOwned("apple")) {
    console.log("å·²æ“æœ‰ apple å¡ç‰‡");
}

// æ–°å¢ç¢ç‰‡
LinkageSystem.cards.addShard("apple", 2);

// æª¢æŸ¥ç¢ç‰‡æ•¸é‡
const shards = LinkageSystem.cards.getShardCount("apple");
console.log(`apple å¡ç‰‡æœ‰ ${shards} ç‰‡ç¢ç‰‡`);
```

### 4. éŸ³æ¨‚ç³»çµ± (LinkageSystem.music)

**åŠŸèƒ½ï¼š** ç®¡ç†èƒŒæ™¯éŸ³æ¨‚æ’­æ”¾ç‹€æ…‹

**ä¸»è¦æ–¹æ³•ï¼š**
- `isPlaying()` - æª¢æŸ¥éŸ³æ¨‚æ˜¯å¦æ­£åœ¨æ’­æ”¾
- `setPlaying(playing)` - è¨­å®šéŸ³æ¨‚æ’­æ”¾ç‹€æ…‹
- `getVolume()` - ç²å–éŸ³é‡è¨­å®š
- `setVolume(volume)` - è¨­å®šéŸ³é‡

**ä½¿ç”¨ç¯„ä¾‹ï¼š**
```javascript
// æª¢æŸ¥éŸ³æ¨‚ç‹€æ…‹
if (LinkageSystem.music.isPlaying()) {
    console.log("éŸ³æ¨‚æ­£åœ¨æ’­æ”¾");
}

// è¨­å®šéŸ³æ¨‚æ’­æ”¾ç‹€æ…‹
LinkageSystem.music.setPlaying(true);
```

### 5. éŠæˆ²é€²åº¦ç³»çµ± (LinkageSystem.progress)

**åŠŸèƒ½ï¼š** ç®¡ç†å„éŠæˆ²é é¢çš„é€²åº¦è³‡æ–™

**ä¸»è¦æ–¹æ³•ï¼š**
- `save(gameName, data)` - å„²å­˜éŠæˆ²é€²åº¦
- `load(gameName)` - è¼‰å…¥éŠæˆ²é€²åº¦
- `clear(gameName)` - æ¸…é™¤éŠæˆ²é€²åº¦

**ä½¿ç”¨ç¯„ä¾‹ï¼š**
```javascript
// å„²å­˜éŠæˆ²é€²åº¦
const gameData = {
    level: 5,
    score: 1000,
    completed: true
};
LinkageSystem.progress.save("typing_game", gameData);

// è¼‰å…¥éŠæˆ²é€²åº¦
const savedData = LinkageSystem.progress.load("typing_game");
if (savedData) {
    console.log("è¼‰å…¥é€²åº¦ï¼š", savedData);
}
```

### 6. é€šçŸ¥ç³»çµ± (LinkageSystem.notifications)

**åŠŸèƒ½ï¼š** é¡¯ç¤ºçµ±ä¸€çš„ç³»çµ±é€šçŸ¥

**ä¸»è¦æ–¹æ³•ï¼š**
- `show(message, type, duration)` - é¡¯ç¤ºé€šçŸ¥

**åƒæ•¸èªªæ˜ï¼š**
- `message` - é€šçŸ¥å…§å®¹ï¼ˆæ”¯æ´ HTMLï¼‰
- `type` - é€šçŸ¥é¡å‹ï¼ˆ'info', 'success', 'warning', 'summary'ï¼‰
- `duration` - é¡¯ç¤ºæ™‚é–“ï¼ˆæ¯«ç§’ï¼Œé è¨­ 3500ï¼‰

**ä½¿ç”¨ç¯„ä¾‹ï¼š**
```javascript
// é¡¯ç¤ºæˆåŠŸé€šçŸ¥
LinkageSystem.notifications.show("ğŸ‰ æ­å–œå®Œæˆä»»å‹™ï¼", 'success');

// é¡¯ç¤ºè­¦å‘Šé€šçŸ¥
LinkageSystem.notifications.show("âš ï¸ æ˜Ÿæ˜Ÿä¸è¶³ï¼", 'warning');

// é¡¯ç¤ºè©³ç´°æ‘˜è¦
const summary = `
<h3>åé€£æŠ½çµæœ</h3>
<p>ğŸ‰ æ–°è§£é–: è˜‹æœ, é¦™è•‰</p>
<p>âœ¨ æ–°ç¢ç‰‡: æ©˜å­x2</p>
<p>â­ é‡è¤‡å¡ç‰‡è½‰æ›: 15 æ˜Ÿæ˜Ÿ</p>
`;
LinkageSystem.notifications.show(summary, 'summary', 6000);
```

## è‡ªå‹•åŒæ­¥æ©Ÿåˆ¶

### localStorage ç›£è½

ç³»çµ±æœƒè‡ªå‹•ç›£è½ localStorage çš„è®ŠåŒ–ï¼Œç•¶è³‡æ–™ç™¼ç”Ÿè®Šæ›´æ™‚ï¼Œæœƒè‡ªå‹•æ›´æ–°ç›¸é—œé é¢çš„é¡¯ç¤ºï¼š

```javascript
window.addEventListener('storage', (e) => {
    switch (e.key) {
        case 'totalStars':
            LinkageSystem.stars.updateDisplay();
            break;
        case 'playerName':
        case 'selectedAvatar':
            LinkageSystem.player.updateDisplay();
            break;
        case 'ownedCards':
        case 'cardShards':
            if (typeof updateCardDisplay === 'function') {
                updateCardDisplay();
            }
            break;
    }
});
```

### é é¢åˆå§‹åŒ–

æ¯å€‹é é¢è¼‰å…¥æ™‚æœƒè‡ªå‹•åˆå§‹åŒ–é€£å‹•ç³»çµ±ï¼š

```javascript
window.addEventListener('load', () => {
    LinkageSystem.init();
});
```

## æ•´åˆåˆ°ç¾æœ‰é é¢

### 1. å¼•å…¥é€£å‹•ç³»çµ±

åœ¨ HTML é é¢çš„ `<script>` æ¨™ç±¤å‰åŠ å…¥ï¼š

```html
<script src="js/userData.js"></script>
```

### 2. æ›¿æ›åŸæœ‰çš„è³‡æ–™ç®¡ç†

å°‡åŸæœ¬ç›´æ¥æ“ä½œ localStorage çš„ç¨‹å¼ç¢¼æ›¿æ›ç‚ºä½¿ç”¨é€£å‹•ç³»çµ±ï¼š

**åŸæœ¬çš„å¯«æ³•ï¼š**
```javascript
// æ˜Ÿæ˜Ÿç®¡ç†
let stars = parseInt(localStorage.getItem("totalStars") || "0");
stars += 50;
localStorage.setItem("totalStars", stars.toString());
document.getElementById("stars").textContent = stars;

// ç©å®¶è³‡æ–™
localStorage.setItem("playerName", "æ–°åç¨±");
document.getElementById("playerName").textContent = "æ–°åç¨±";
```

**ä½¿ç”¨é€£å‹•ç³»çµ±ï¼š**
```javascript
// æ˜Ÿæ˜Ÿç®¡ç†
LinkageSystem.stars.add(50);

// ç©å®¶è³‡æ–™
LinkageSystem.player.setName("æ–°åç¨±");
```

### 3. æ›´æ–°é¡¯ç¤ºå‡½æ•¸

å°‡åŸæœ¬çš„é¡¯ç¤ºæ›´æ–°å‡½æ•¸æ”¹ç‚ºä½¿ç”¨é€£å‹•ç³»çµ±ï¼š

```javascript
// åŸæœ¬çš„æ›´æ–°å‡½æ•¸
function updateStars() {
    document.getElementById("stars").textContent = stars;
    localStorage.setItem("totalStars", stars.toString());
}

// ä½¿ç”¨é€£å‹•ç³»çµ±
function updateStars() {
    LinkageSystem.stars.updateDisplay();
}
```

## å„ªå‹¢

1. **çµ±ä¸€ç®¡ç†ï¼š** æ‰€æœ‰è³‡æ–™æ“ä½œéƒ½é€éçµ±ä¸€çš„ API
2. **è‡ªå‹•åŒæ­¥ï¼š** è³‡æ–™è®Šæ›´æ™‚è‡ªå‹•æ›´æ–°æ‰€æœ‰ç›¸é—œé é¢
3. **éŒ¯èª¤è™•ç†ï¼š** å…§å»ºéŒ¯èª¤è™•ç†å’Œè³‡æ–™é©—è­‰
4. **æ“´å±•æ€§ï¼š** å®¹æ˜“æ–°å¢æ–°çš„è³‡æ–™é¡å‹å’Œç®¡ç†åŠŸèƒ½
5. **ä¸€è‡´æ€§ï¼š** ç¢ºä¿æ‰€æœ‰é é¢çš„è³‡æ–™é¡¯ç¤ºä¸€è‡´

## æ³¨æ„äº‹é …

1. **è¼‰å…¥é †åºï¼š** ç¢ºä¿ `userData.js` åœ¨å…¶ä»–è…³æœ¬ä¹‹å‰è¼‰å…¥
2. **å‡½æ•¸åç¨±ï¼š** æŸäº›é é¢å¯èƒ½éœ€è¦å¯¦ä½œ `updateCardDisplay()` å‡½æ•¸ä¾›é€£å‹•ç³»çµ±èª¿ç”¨
3. **ç€è¦½å™¨ç›¸å®¹æ€§ï¼š** ä½¿ç”¨ localStorage å’Œç¾ä»£ JavaScript ç‰¹æ€§
4. **è³‡æ–™å‚™ä»½ï¼š** é‡è¦è³‡æ–™å»ºè­°å®šæœŸå‚™ä»½

## æœªä¾†æ“´å±•

é€£å‹•ç³»çµ±è¨­è¨ˆç‚ºå¯æ“´å±•çš„æ¶æ§‹ï¼Œæœªä¾†å¯ä»¥è¼•é¬†æ–°å¢ï¼š

- æˆå°±ç³»çµ±ç®¡ç†
- éŠæˆ²çµ±è¨ˆè³‡æ–™
- è¨­å®šé¸é …ç®¡ç†
- å¤šèªè¨€æ”¯æ´
- é›²ç«¯åŒæ­¥åŠŸèƒ½ 