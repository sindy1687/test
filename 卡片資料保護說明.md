# 卡片資料保護說明

## 概述

卡片資料是遊戲中最珍貴的資產之一，為了確保卡片資料不被意外清空，系統實施了多層保護機制。

## 🛡️ 卡片保護機制

### 1. 自動備份系統
- **即時備份**：每次卡片資料變更時自動創建備份
- **備份位置**：`cardDataBackup` localStorage 項目
- **備份內容**：包含所有已擁有卡片和碎片資料

### 2. 操作記錄系統
- **操作日誌**：記錄所有卡片相關操作
- **時間戳記**：記錄每次操作的時間
- **詳細資訊**：記錄操作類型和影響範圍

### 3. 多重確認機制
- **保護模式**：啟用後所有清除操作都需要額外確認
- **資料比較**：顯示操作前後的資料差異
- **警告提示**：當操作可能導致資料丟失時顯示警告

## 📋 卡片保護功能

### 🔒 卡片保護模式
- **啟用**：所有卡片清除操作都需要額外確認
- **停用**：關閉額外確認（不建議）
- **預設狀態**：啟用

### 💾 卡片備份管理
- **查看備份**：顯示備份時間和內容
- **恢復備份**：從備份恢復卡片資料
- **創建備份**：手動創建新的備份

### 🔧 資料修復工具
- **完整性檢查**：檢查卡片資料是否完整
- **自動修復**：從備份自動修復損壞的資料
- **統計資訊**：查看卡片資料的詳細統計

## 🚨 危險操作清單

以下操作被標記為危險操作，需要特別注意：

1. **清除所有卡片資料** - 需要輸入 "CONFIRM" 確認
2. **清除已擁有卡片** - 保留碎片但清除卡片
3. **停用卡片保護** - 關閉保護機制
4. **從備份恢復** - 覆蓋目前資料

## 💡 最佳實踐

### 建議設定
- ✅ 保持卡片保護模式啟用
- ✅ 定期檢查資料完整性
- ✅ 在重要操作前手動創建備份

### 操作前檢查
1. 確認目前卡片數量
2. 檢查備份是否有效
3. 確認操作的必要性
4. 準備恢復方案

### 資料恢復流程
1. 檢查主要資料是否損壞
2. 嘗試從備份恢復
3. 檢查恢復後的資料完整性
4. 重新創建備份

## 🔧 故障排除

### 卡片資料丟失
1. 檢查是否有備份
2. 嘗試從備份恢復
3. 檢查操作日誌
4. 聯繫技術支援

### 備份檔案損壞
1. 檢查 localStorage 空間
2. 嘗試修復資料
3. 重新創建備份
4. 清理不必要的資料

### 保護機制失效
1. 重新啟用保護模式
2. 檢查系統狀態
3. 重新初始化卡片系統
4. 更新瀏覽器

## 📊 資料統計

### 卡片統計資訊
- **總卡片數**：已擁有的卡片數量
- **總碎片數**：擁有的碎片總數
- **保護狀態**：卡片保護是否啟用
- **資料完整性**：主要資料和備份的狀態

### 操作記錄
- **最後操作**：最近一次卡片操作
- **操作類型**：操作的名稱和詳細資訊
- **時間戳記**：操作的具體時間

## 🛠️ 技術細節

### 備份格式
```json
{
  "ownedCards": { "card1": true, "card2": true },
  "shards": { "card1": 5, "card2": 3 },
  "timestamp": 1234567890,
  "cardCount": 2,
  "shardCount": 8
}
```

### 保護機制檢查
- 檢查主要資料是否為有效物件
- 檢查備份資料是否存在
- 檢查保護模式是否啟用
- 記錄所有操作日誌

## 📞 技術支援

如果遇到卡片資料問題，請：
1. 記錄錯誤訊息和時間
2. 保存操作日誌
3. 檢查備份狀態
4. 聯繫開發團隊

---

**重要提醒**：卡片保護機制是為了保護您的珍貴卡片資料，建議保持啟用狀態。只有在特殊情況下才考慮停用保護機制。 