# 🎭 角色對話系統說明

## 📖 系統概述

角色對話系統是一個為英打小英雄遊戲設計的互動式對話功能，讓玩家選擇的角色能夠在遊戲過程中與玩家進行對話，提供更豐富的遊戲體驗。

## 🎯 主要功能

### 1. 角色選擇與個性化
- **8種不同角色**：每個角色都有獨特的性格和對話風格
- **個性化語音**：不同角色使用不同的語音設定
- **角色專屬對話**：每個角色都有獨特的對話內容

### 2. 對話場景
- **歡迎對話**：進入遊戲時的問候
- **鼓勵對話**：答對題目時的鼓勵
- **勝利對話**：遊戲勝利時的祝賀
- **失敗對話**：答錯題目時的安慰

### 3. 遊戲整合
- **遊戲開始**：角色鼓勵玩家開始挑戰
- **答對題目**：角色給予鼓勵和讚美
- **答錯題目**：角色安慰並鼓勵繼續努力
- **遊戲結束**：根據表現給予相應的回饋

## 🎮 角色介紹

### 🌟 勇敢戰士 (Warrior)
- **性格**：勇敢、堅定、充滿鬥志
- **語音**：低沉穩重
- **特色**：強調勇氣和戰鬥精神

### ⚡ 閃電戰士 (Speedster)
- **性格**：快速、活力、充滿能量
- **語音**：年輕活力
- **特色**：強調速度和效率

### 🛡️ 防禦戰士 (Defender)
- **性格**：穩重、保護、堅定不移
- **語音**：穩重可靠
- **特色**：強調防禦和堅持

### 🎯 精準射手 (Sharpshooter)
- **性格**：精準、冷靜、專注
- **語音**：冷靜理性
- **特色**：強調準確度和專注力

### 🚀 探險家 (Explorer)
- **性格**：好奇、探索、發現
- **語音**：好奇活潑
- **特色**：強調探索和發現

### 🌈 魔法師 (Magician)
- **性格**：神秘、智慧、創造力
- **語音**：活潑有趣
- **特色**：強調魔法和奇蹟

### 🎭 虛擬偶像 (Idol)
- **性格**：魅力、活力、表演
- **語音**：甜美可愛
- **特色**：強調魅力和表演

### 🌸 櫻花精靈 (Fairy)
- **性格**：溫柔、善良、美好
- **語音**：溫柔甜美
- **特色**：強調溫柔和美好

## 🔧 技術實現

### 檔案結構
```
js/
├── characterDialogue.js    # 角色對話核心系統
├── gameDialogue.js         # 遊戲對話整合
└── userData.js            # 用戶數據管理
```

### 主要功能模組

#### CharacterDialogue 系統
- **對話數據管理**：存儲各角色的對話內容
- **對話框顯示**：創建美觀的對話界面
- **語音播放**：整合語音合成功能
- **角色切換**：動態切換不同角色

#### GameDialogue 系統
- **遊戲場景整合**：與遊戲邏輯結合
- **時機控制**：在適當時候觸發對話
- **狀態管理**：追蹤遊戲狀態

### 對話觸發時機
1. **頁面載入**：首次訪問時顯示歡迎對話
2. **角色選擇**：選擇新角色時觸發對話
3. **遊戲開始**：進入遊戲時顯示鼓勵
4. **答對題目**：給予鼓勵和讚美
5. **答錯題目**：安慰並鼓勵繼續
6. **遊戲結束**：根據表現給予回饋

## 🎨 視覺設計

### 對話框樣式
- **背景**：半透明漸層背景
- **邊框**：發光效果和動畫
- **文字**：清晰易讀的字體
- **按鈕**：互動式按鈕設計

### 動畫效果
- **出現動畫**：對話框淡入和縮放
- **消失動畫**：平滑的淡出效果
- **懸停效果**：按鈕的互動反饋

## 🔊 語音功能

### 語音設定
- **速率控制**：調整語音播放速度
- **音調調整**：改變語音的音調
- **音量控制**：調整語音音量
- **語言選擇**：支援中文語音

### 角色語音特點
- **戰士類**：較低沉的語音
- **活力類**：較高的語音
- **溫柔類**：較柔和的語音

## 🚀 使用方法

### 1. 基本使用
```javascript
// 初始化對話系統
CharacterDialogue.init();

// 顯示歡迎對話
CharacterDialogue.showWelcomeDialogue();

// 顯示鼓勵對話
CharacterDialogue.showEncouragement();
```

### 2. 遊戲整合
```javascript
// 遊戲開始時
GameDialogue.showGameStartDialogue();

// 答對題目時
GameDialogue.showCorrectAnswerDialogue();

// 答錯題目時
GameDialogue.showWrongAnswerDialogue();

// 遊戲結束時
GameDialogue.showGameVictoryDialogue();
```

### 3. 角色切換
```javascript
// 更新當前角色
CharacterDialogue.currentCharacter = 'warrior';

// 顯示角色對話
CharacterDialogue.showWelcomeDialogue();
```

## 📝 自定義對話

### 添加新角色
1. 在 `dialogues` 對象中添加新角色
2. 定義角色的對話內容
3. 設定語音參數
4. 更新角色選擇器

### 修改對話內容
```javascript
dialogues: {
  newCharacter: {
    name: "新角色名稱",
    greetings: ["歡迎對話1", "歡迎對話2"],
    encouragements: ["鼓勵對話1", "鼓勵對話2"],
    victories: ["勝利對話1", "勝利對話2"],
    defeats: ["失敗對話1", "失敗對話2"]
  }
}
```

## 🧪 測試功能

### 測試頁面
使用 `test_character_dialogue.html` 來測試：
- 角色選擇功能
- 各種對話場景
- 語音播放功能
- 系統設定

### 測試項目
1. **角色切換**：測試不同角色的對話
2. **對話場景**：測試各種對話類型
3. **語音功能**：測試語音播放
4. **設定保存**：測試設定的持久化

## 🔮 未來擴展

### 計劃功能
- **更多角色**：添加更多角色類型
- **對話分支**：根據玩家表現顯示不同對話
- **情感系統**：角色情感狀態影響對話
- **多語言支援**：支援更多語言

### 技術改進
- **語音優化**：更自然的語音合成
- **動畫增強**：更豐富的視覺效果
- **性能優化**：提升系統性能

## 📞 技術支援

### 常見問題
1. **語音不播放**：檢查瀏覽器語音支援
2. **對話不顯示**：檢查JavaScript載入
3. **角色不切換**：檢查localStorage設定

### 除錯方法
- 檢查瀏覽器控制台錯誤
- 確認檔案路徑正確
- 驗證localStorage數據

---

*這個角色對話系統為英打小英雄遊戲增添了豐富的互動體驗，讓學習過程更加有趣和個性化。* 